{"id":"00455","group":"easy-ham-2","checksum":{"type":"MD5","value":"3bfa014eabb16ee89f5e18b4e21a8deb"},"text":"From ilug-admin@linux.ie  Tue Aug 20 11:51:58 2002\nReturn-Path: <ilug-admin@linux.ie>\nDelivered-To: yyyy@localhost.netnoteinc.com\nReceived: from localhost (localhost [127.0.0.1])\n\tby phobos.labs.netnoteinc.com (Postfix) with ESMTP id C1A7F43C38\n\tfor <jm@localhost>; Tue, 20 Aug 2002 06:51:36 -0400 (EDT)\nReceived: from phobos [127.0.0.1]\n\tby localhost with IMAP (fetchmail-5.9.0)\n\tfor jm@localhost (single-drop); Tue, 20 Aug 2002 11:51:36 +0100 (IST)\nReceived: from lugh.tuatha.org (root@lugh.tuatha.org [194.125.145.45]) by\n    dogma.slashnull.org (8.11.6/8.11.6) with ESMTP id g7JLPZZ09998 for\n    <jm-ilug@jmason.org>; Mon, 19 Aug 2002 22:25:35 +0100\nReceived: from lugh (root@localhost [127.0.0.1]) by lugh.tuatha.org\n    (8.9.3/8.9.3) with ESMTP id WAA29957; Mon, 19 Aug 2002 22:24:29 +0100\nReceived: from hibernia.jakma.org (hibernia.clubi.ie [212.17.32.129]) by\n    lugh.tuatha.org (8.9.3/8.9.3) with ESMTP id WAA29921 for <ilug@linux.ie>;\n    Mon, 19 Aug 2002 22:24:15 +0100\nReceived: from fogarty.jakma.org (fogarty.jakma.org [192.168.0.4]) by\n    hibernia.jakma.org (8.11.6/8.11.6) with ESMTP id g7JLWCD01993;\n    Mon, 19 Aug 2002 22:32:12 +0100\nReceived: from localhost (paul@localhost) by fogarty.jakma.org\n    (8.11.6/8.11.6) with ESMTP id g7JLWAX14622; Mon, 19 Aug 2002 22:32:10\n    +0100\nX-Authentication-Warning: fogarty.jakma.org: paul owned process doing -bs\nDate: Mon, 19 Aug 2002 22:32:09 +0100 (IST)\nFrom: Paul Jakma <paul@clubi.ie>\nX-X-Sender: paul@fogarty.jakma.org\nTo: Vincent Cunniffe <vincent@cunniffe.net>\nCc: ilug <ilug@linux.ie>\nSubject: Re: [ILUG] linux pthreads problem\nIn-Reply-To: <3D611AF5.7080703@cunniffe.net>\nMessage-Id: <Pine.LNX.4.44.0208192219450.14173-100000@fogarty.jakma.org>\nX-Nsa: iraq saddam hammas hisballah rabin ayatollah korea vietnam revolt\n    mustard gas\nX-Dumb-Filters: aryan marijuiana cocaine heroin hardcore cum pussy porn\n    teen tit sex lesbian group\nMIME-Version: 1.0\nContent-Type: TEXT/PLAIN; charset=US-ASCII\nSender: ilug-admin@linux.ie\nErrors-To: ilug-admin@linux.ie\nX-Mailman-Version: 1.1\nPrecedence: bulk\nList-Id: Irish Linux Users' Group <ilug.linux.ie>\nX-Beenthere: ilug@linux.ie\n\nOn Mon, 19 Aug 2002, Vincent Cunniffe wrote:\n\n> The process list initially shows a single main process :\n> \n>    16877  1.0  0.2  1824  540 pts/1    S    17:14   0:00 ./heartbeat2\n> \n> When the client runs, connects, and sleeps for 5 seconds :\n> \n>    16877  0.0  0.2 10024  604 pts/1    S    17:14   0:00 ./heartbeat2\n>    16887  0.5  0.2  1796  720 pts/1    S    17:15   0:00 ./client\n>    16888  0.0  0.2 10024  604 pts/1    S    17:15   0:00 ./heartbeat2\n>    16889  0.0  0.0     0    0 pts/1    Z    17:15   0:00 [heartbeat2 \n> <defunct>]\n> \n> When the client exits, and the thread should finish, it doesn't :\n> \n>    16877  0.0  0.2 10024  604 pts/1    S    17:14   0:00 ./heartbeat2\n>    16888  0.0  0.2 10024  604 pts/1    S    17:15   0:00 ./heartbeat2\n> \n> This second thread never goes away, but no more threads accumulate,\n> and the total memory consumption rises by about 8-9MB every single\n> time a client connects.\n> \n> C++ bug, linux bug, pthreads bug, coding error?\n\nhmm... with pthreads there is always one thread which acts as a \n'thread manager'. do the number of processes accumulate? or is it \njust that the # of threads is == # of threads you're expecting + 1? \nif the latter, ttbomk that is normal.\n\nie, you dont create the thread until the accept() returns. so up \nuntil then its a normal programme (ie no thread manager). after that \nyou will always have +1 processes (for the thread manager).\n\nalso, the stack for further threads is allocated from the heap. (see\nsigaltstack() ) possibly glibc does not brk() back the space, just\nlike malloc()/free() does not always release the space to the heap\nagain (as most programmes will allocate memory / threads again\nsoonish anyway).\n\n> Regards,\n> \n> Vin\n\nregards,\n-- \nPaul Jakma\tpaul@clubi.ie\tpaul@jakma.org\tKey ID: 64A2FF6A\n\twarning: do not ever send email to spam@dishone.st\nFortune:\nThe Official Colorado State Vegetable is now the \"state legislator\".\n\n\n\n-- \nIrish Linux Users' Group: ilug@linux.ie\nhttp://www.linux.ie/mailman/listinfo/ilug for (un)subscription information.\nList maintainer: listmaster@linux.ie\n\n"}