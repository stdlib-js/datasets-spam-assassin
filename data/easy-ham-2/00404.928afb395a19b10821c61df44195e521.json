{"id":"00404","group":"easy-ham-2","checksum":{"type":"MD5","value":"928afb395a19b10821c61df44195e521"},"text":"From ilug-admin@linux.ie  Wed Aug 14 11:00:54 2002\nReturn-Path: <ilug-admin@linux.ie>\nDelivered-To: yyyy@localhost.netnoteinc.com\nReceived: from localhost (localhost [127.0.0.1])\n\tby phobos.labs.netnoteinc.com (Postfix) with ESMTP id D5665440FE\n\tfor <jm@localhost>; Wed, 14 Aug 2002 05:52:07 -0400 (EDT)\nReceived: from phobos [127.0.0.1]\n\tby localhost with IMAP (fetchmail-5.9.0)\n\tfor jm@localhost (single-drop); Wed, 14 Aug 2002 10:52:07 +0100 (IST)\nReceived: from lugh.tuatha.org (root@lugh.tuatha.org [194.125.145.45]) by\n    dogma.slashnull.org (8.11.6/8.11.6) with ESMTP id g7E7iK405742 for\n    <jm-ilug@jmason.org>; Wed, 14 Aug 2002 08:44:20 +0100\nReceived: from lugh (root@localhost [127.0.0.1]) by lugh.tuatha.org\n    (8.9.3/8.9.3) with ESMTP id IAA26436; Wed, 14 Aug 2002 08:43:17 +0100\nReceived: from homer.jinny.ie ([193.120.171.3]) by lugh.tuatha.org\n    (8.9.3/8.9.3) with ESMTP id IAA26400 for <ilug@linux.ie>; Wed,\n    14 Aug 2002 08:43:11 +0100\nReceived: from jlooney.jinny.ie (fw [193.120.171.2]) by homer.jinny.ie\n    (8.9.3/8.11.2) with ESMTP id IAA20978 for <ilug@linux.ie>; Wed,\n    14 Aug 2002 08:42:40 +0100\nReceived: (from john@localhost) by jlooney.jinny.ie (8.11.6/8.11.6) id\n    g7E7gre09348 for ilug@linux.ie; Wed, 14 Aug 2002 08:42:53 +0100\nX-Authentication-Warning: jlooney.jinny.ie: john set sender to\n    jlooney@jinny.ie using -f\nDate: Wed, 14 Aug 2002 08:42:53 +0100\nFrom: \"John P. Looney\" <valen@tuatha.org>\nTo: Irish LUG list <ilug@linux.ie>\nSubject: Re: [ILUG] mirroring on a running system\nMessage-Id: <20020814074252.GI28648@jinny.ie>\nReply-To: ilug@linux.ie\nMail-Followup-To: Irish LUG list <ilug@linux.ie>\nReferences: <20020813134842.GZ2019@jinny.ie>\n    <20020813145657.A25372@prodigy.Redbrick.DCU.IE>\n    <200208131507.04699.colm@tuatha.org> <20020813151056.GB28648@jinny.ie>\nMIME-Version: 1.0\nContent-Type: text/plain; charset=us-ascii\nContent-Disposition: inline\nIn-Reply-To: <20020813151056.GB28648@jinny.ie>\nUser-Agent: Mutt/1.4i\nX-Os: Red Hat Linux 7.3/Linux 2.4.18-3\nX-Url: http://www.redbrick.dcu.ie/~valen\nX-Gnupg-Publickey: http://www.redbrick.dcu.ie/~valen/public.asc\nSender: ilug-admin@linux.ie\nErrors-To: ilug-admin@linux.ie\nX-Mailman-Version: 1.1\nPrecedence: bulk\nList-Id: Irish Linux Users' Group <ilug.linux.ie>\nX-Beenthere: ilug@linux.ie\n\nOn Tue, Aug 13, 2002 at 04:10:57PM +0100, John P. Looney mentioned:\n> > I think this procedure is described in the RAID HOWTO for installing a\n> > new system, but it applies just as well to a running system.\n> \n>  Just double checking (I'd be pissed if I just wiped my installation!)...\n\n Well, this mostly worked, despite Colm saying that \"you want the\n\"failed-disk\" *instead* of the second \"raid-disk\", not in addition to it\".\n\n I suppose that means instead of:\n\n> raiddev /dev/md0\n>         raid-level      1\n>         nr-raid-disks   2\n>         nr-spare-disks  0\n>         chunk-size     4\n>         persistent-superblock 1\n>         device          /dev/hdg3\n>         raid-disk       0\n>         device          /dev/hda5\n>         raid-disk       1\n> \n>         failed-disk     1\n\n I should have had:\n\n> raiddev /dev/md0\n>         raid-level      1\n>         nr-raid-disks   2\n>         nr-spare-disks  0\n>         chunk-size     4\n>         persistent-superblock 1\n>         device          /dev/hdg3\n>         raid-disk       0\n>         device          /dev/hda5\n>         failed-disk     1\n\n It likely means that I was just lucky I put the failed-disk directive\nafter the raid-disk one :)\n\n Anyway. It's doesn't quite boot right, with /=/dev/md0 in fstab. On boot, I see:\n\nPartition check:\n hda: [PTBL] [2482/255/63] hda1 hda2 hda3 hda4 < hda5 >\n hdg: [PTBL] [2434/255/63] hdg1 hdg2 hdg3\nfloppy0: no floppy controllers found\nRAMDISK driver initialized: 16 RAM disks of 4096K size 1024 blocksize\nide-floppy driver 0.99.newide\nmd: md driver 0.90.0 MAX_MD_DEVS=256, MD_SB_DISKS=27\nmd: Autodetecting RAID arrays.\n [events: 00000000]\nmd: invalid raid superblock magic on hda2\nmd: hda2 has invalid sb, not importing!\nmd: could not import hda2!\n [events: 00000004]\n [events: 00000002]\n [events: 00000004]\nmd: autorun ...\nmd: considering hdg3 ...\nmd:  adding hdg3 ...\nmd:  adding hda5 ...\nmd: created md0\nmd: bind<hda5,1>\nmd: bind<hdg3,2>\nmd: running: <hdg3><hda5>\nmd: hdg3's event counter: 00000004\nmd: hda5's event counter: 00000004\nmd: RAID level 1 does not need chunksize! Continuing anyway.\nkmod: failed to exec /sbin/modprobe -s -k md-personality-3, errno = 2\nmd: personality 3 is not loaded!\nmd :do_md_run() returned -22\nmd: md0 stopped.\nmd: unbind<hdg3,1>\nmd: export_rdev(hdg3)\nmd: unbind<hda5,0>\nmd: export_rdev(hda5)\nmd: considering hdg1 ...\nmd:  adding hdg1 ...\nmd: created md1\nmd: bind<hdg1,1>\nmd: running: <hdg1>\nmd: hdg1's event counter: 00000002\nmd: RAID level 1 does not need chunksize! Continuing anyway.\nkmod: failed to exec /sbin/modprobe -s -k md-personality-3, errno = 2\nmd: personality 3 is not loaded!\nmd :do_md_run() returned -22\nmd: md1 stopped.\nmd: unbind<hdg1,0>\nmd: export_rdev(hdg1)\nmd: ... autorun DONE.\n\n Any ideas why ?\n\n My suspicion is that I've a lack of knowledge about how initrd works, so\nI'm not sure it's loading it. For a start, the / filesystem is being\nmounted as ext2, at first, not ext3. It does seem mounted as ext3 after\nthe fsck is done - but that means that it's mounted as ext2 read only,\nfsck'ed and then remounted ext3. Losing the point of it.\n\n Given I can't pass the kernel parameters (I think), how then can I get it\nto load the initrd ?\n\nKate\n\n\n-- \nIrish Linux Users' Group: ilug@linux.ie\nhttp://www.linux.ie/mailman/listinfo/ilug for (un)subscription information.\nList maintainer: listmaster@linux.ie\n\n\n"}