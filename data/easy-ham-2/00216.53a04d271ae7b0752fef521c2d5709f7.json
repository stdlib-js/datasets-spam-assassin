{"id":"00216","group":"easy-ham-2","checksum":{"type":"MD5","value":"53a04d271ae7b0752fef521c2d5709f7"},"text":"From ilug-admin@linux.ie  Fri Aug  2 09:25:26 2002\nReturn-Path: <ilug-admin@linux.ie>\nDelivered-To: yyyy@localhost.netnoteinc.com\nReceived: from localhost (localhost [127.0.0.1])\n\tby phobos.labs.netnoteinc.com (Postfix) with ESMTP id EB675440F3\n\tfor <jm@localhost>; Fri,  2 Aug 2002 04:25:23 -0400 (EDT)\nReceived: from phobos [127.0.0.1]\n\tby localhost with IMAP (fetchmail-5.9.0)\n\tfor jm@localhost (single-drop); Fri, 02 Aug 2002 09:25:23 +0100 (IST)\nReceived: from lugh.tuatha.org (root@lugh.tuatha.org [194.125.145.45]) by\n    dogma.slashnull.org (8.11.6/8.11.6) with ESMTP id g728P5212559 for\n    <jm-ilug@jmason.org>; Fri, 2 Aug 2002 09:25:05 +0100\nReceived: from lugh (root@localhost [127.0.0.1]) by lugh.tuatha.org\n    (8.9.3/8.9.3) with ESMTP id JAA25741; Fri, 2 Aug 2002 09:23:21 +0100\nX-Authentication-Warning: lugh.tuatha.org: Host root@localhost [127.0.0.1]\n    claimed to be lugh\nReceived: from paat.pair.com (paat.pair.com [209.68.1.209]) by\n    lugh.tuatha.org (8.9.3/8.9.3) with SMTP id JAA25710 for <ilug@linux.ie>;\n    Fri, 2 Aug 2002 09:23:14 +0100\nReceived: (qmail 21847 invoked by uid 3138); 2 Aug 2002 08:23:07 -0000\nDate: Fri, 2 Aug 2002 04:23:07 -0400\nFrom: Wesley Darlington <wesley@yelsew.com>\nTo: ilug@linux.ie\nSubject: Re: [ILUG] Strange ssh problem\nMessage-Id: <20020802082307.GA20507@paat.pair.com>\nReferences: <20020801145112.GB2500@bagend.makalumedia.com>\nMIME-Version: 1.0\nContent-Type: text/plain; charset=us-ascii\nContent-Disposition: inline\nIn-Reply-To: <20020801145112.GB2500@bagend.makalumedia.com>\nUser-Agent: Mutt/1.3.25i\nSender: ilug-admin@linux.ie\nErrors-To: ilug-admin@linux.ie\nX-Mailman-Version: 1.1\nPrecedence: bulk\nList-Id: Irish Linux Users' Group <ilug.linux.ie>\nX-Beenthere: ilug@linux.ie\n\nHi Niall,\n\nSome thoughts...\n\no Run the ssh client with verbosity 3 (ssh -v -v -v)\no Run an sshd with debugging level three (sshd -d -d -d)\no ~alfio doesn't seem to be nfs-mounted like ~alfred\n\n(The following aren't really applicable, but...\n    o Has alfred been logged in for ages? Has the tmpsweeper swept\n      through /tmp removing alfred's ssh-agent directory in its wake?\n    o Is /tmp a+rwxt? Does /dev/null exist?\n    o Has alfred been messing with his TMPDIR envar?\n    o What does lsof on his ssh-agent say? What about on alfio's?\n    o What are the permissions on ~alfred and ~alfred/.ssh?\n    o Does alfred's uid conflict with somebody else's?\n    o Does alfred's $SSH_AGENT_PID correspond to his agent? alfio's?\n)\n\nWesley.\n\n\nOn Thu, Aug 01, 2002 at 03:51:12PM +0100, Niall O Broin wrote:\n> I have a strange problem with one user in a small network using ssh.\n> Everyone in the network uses ssh and they run an ssh-agent on login. This\n> works fine for conveniently wandering around the network and to some of our\n> external boxes - or did, until today. Suddenly, when one user (alfred) tries\n> to ssh anywhere he's asked for a password. He says He changed nothing (don't\n> they all) but I do actually believe him. I used ssh-keygen to make new keys\n> but that didn't help. \n> \n> I created a new user alfio into whose home directory I copied alfred's .ssh\n> directory - alfio can wander around free as a bird without being asked for a\n> password ever (except of course for the passphrase to load the identiy into\n> the agent).\n> \n> In case there was something else in Alfred' environment, I copied .??* from\n> alfred's home directory to alfio's, remembering to change ownership\n> afterwards. Still alfio is as free as a bird.\n> \n> We use only SSH2 with DSA keys. An extract from a ssh -v for alfio is below\n> \n> debug1: got SSH2_MSG_SERVICE_ACCEPT\n> debug1: authentications that can continue: publickey,password\n> debug1: next auth method to try is publickey\n> debug1: userauth_pubkey_agent: testing agent key /home/alfio/.ssh/id_dsa\n> debug1: input_userauth_pk_ok: pkalg ssh-dss blen 434 lastkey 0x80916f0 hint -1\n> debug1: ssh-userauth2 successful: method publickey\n> \n> and before starting this ssh attempt, ssh-add -l for alfio said:\n> \n> 1024 07:4c:7c:90:0d:28:41:3a:95:c2:81:3d:ba:c4:3d:03 /home/alfio/.ssh/id_dsa (DSA)\n> \n> whereas with alfred the same segment of the debug log went\n> \n> debug1: got SSH2_MSG_SERVICE_ACCEPT\n> debug1: authentications that can continue: publickey,password\n> debug1: next auth method to try is publickey\n> debug1: userauth_pubkey_agent: testing agent key /nfshome/alfred/.ssh/id_dsa\n> debug1: authentications that can continue: publickey,password\n> \n> and before starting this ssh attempt, ssh-add -l for alfred said:\n> \n> 1024 07:4c:7c:90:0d:28:41:3a:95:c2:81:3d:ba:c4:3d:03 /home/alfred/.ssh/id_dsa (DSA)\n> \n> \n> This problem is definitely related to alfred as a user - it happens when he\n> logs in on differing workstations (all NFS mounting the same home\n> directories) and the other users (including good old alfio) don't have any\n> problems.\n> \n> \n> Niall\n> \n> -- \n> Irish Linux Users' Group: ilug@linux.ie\n> http://www.linux.ie/mailman/listinfo/ilug for (un)subscription information.\n> List maintainer: listmaster@linux.ie\n\n-- \nIrish Linux Users' Group: ilug@linux.ie\nhttp://www.linux.ie/mailman/listinfo/ilug for (un)subscription information.\nList maintainer: listmaster@linux.ie\n\n\n"}