{"id":"00965","group":"easy-ham-1","checksum":{"type":"MD5","value":"5732172f491041028b563a9c919d9b4f"},"text":"From exmh-workers-admin@redhat.com  Wed Aug 28 18:49:09 2002\nReturn-Path: <exmh-workers-admin@spamassassin.taint.org>\nDelivered-To: yyyy@localhost.netnoteinc.com\nReceived: from localhost (localhost [127.0.0.1])\n\tby phobos.labs.netnoteinc.com (Postfix) with ESMTP id B0CDC43F99\n\tfor <jm@localhost>; Wed, 28 Aug 2002 13:49:08 -0400 (EDT)\nReceived: from phobos [127.0.0.1]\n\tby localhost with IMAP (fetchmail-5.9.0)\n\tfor jm@localhost (single-drop); Wed, 28 Aug 2002 18:49:08 +0100 (IST)\nReceived: from listman.spamassassin.taint.org (listman.spamassassin.taint.org [66.187.233.211]) by\n    dogma.slashnull.org (8.11.6/8.11.6) with ESMTP id g7SHhuZ03444 for\n    <jm-exmh@jmason.org>; Wed, 28 Aug 2002 18:43:56 +0100\nReceived: from listman.spamassassin.taint.org (localhost.localdomain [127.0.0.1]) by\n    listman.redhat.com (Postfix) with ESMTP id 67A4B3EC06; Wed, 28 Aug 2002\n    13:44:05 -0400 (EDT)\nDelivered-To: exmh-workers@listman.spamassassin.taint.org\nReceived: from int-mx1.corp.spamassassin.taint.org (int-mx1.corp.spamassassin.taint.org\n    [172.16.52.254]) by listman.redhat.com (Postfix) with ESMTP id D3BD33EE6F\n    for <exmh-workers@listman.redhat.com>; Wed, 28 Aug 2002 13:33:23 -0400\n    (EDT)\nReceived: (from mail@localhost) by int-mx1.corp.spamassassin.taint.org (8.11.6/8.11.6)\n    id g7SHXKV16333 for exmh-workers@listman.redhat.com; Wed, 28 Aug 2002\n    13:33:20 -0400\nReceived: from mx1.spamassassin.taint.org (mx1.spamassassin.taint.org [172.16.48.31]) by\n    int-mx1.corp.redhat.com (8.11.6/8.11.6) with SMTP id g7SHXKY16329 for\n    <exmh-workers@redhat.com>; Wed, 28 Aug 2002 13:33:20 -0400\nReceived: from blackcomb.panasas.com (gw2.panasas.com [65.194.124.178]) by\n    mx1.redhat.com (8.11.6/8.11.6) with SMTP id g7SHIEl27113 for\n    <exmh-workers@redhat.com>; Wed, 28 Aug 2002 13:18:14 -0400\nReceived: from medlicott.panasas.com (IDENT:welch@medlicott.panasas.com\n    [172.17.132.188]) by blackcomb.panasas.com (8.9.3/8.9.3) with ESMTP id\n    NAA05316; Wed, 28 Aug 2002 13:32:46 -0400\nMessage-Id: <200208281732.NAA05316@blackcomb.panasas.com>\nX-Mailer: exmh version 2.5.9 07/25/2002 with nmh-1.0.4\nTo: Robert Elz <kre@munnari.OZ.AU>\nCc: Chris Garrigues <cwg-dated-1030976555.34ad5b@DeepEddy.Com>,\n\texmh-workers@redhat.com\nSubject: Re: New Sequences Window\nIn-Reply-To: <22628.1030545866@munnari.OZ.AU>\nReferences: <1030544555.28815.TMDA@deepeddy.vircio.com>\n    <1030028647.6462.TMDA@deepeddy.vircio.com>\n    <1029945287.4797.TMDA@deepeddy.vircio.com>\n    <1029882468.3116.TMDA@deepeddy.vircio.com> <9627.1029933001@munnari.OZ.AU>\n    <1029943066.26919.TMDA@deepeddy.vircio.com>\n    <1029944441.398.TMDA@deepeddy.vircio.com> <13277.1030015920@munnari.OZ.AU>\n    <21099.1030543590@munnari.OZ.AU> <22628.1030545866@munnari.OZ.AU>\nComments: In-reply-to Robert Elz <kre@munnari.OZ.AU> message dated \"Wed,\n    28 Aug 2002 21:44:26 +0700.\"\nFrom: Brent Welch <welch@panasas.com>\nX-Url: http://www.panasas.com/\nX-Face: \"HxE|?EnC9fVMV8f70H83&{fgLE.|FZ^$>@Q(yb#N,Eh~N]e&]=>\n    r5~UnRml1:4EglY{9B+ :'wJq$@c_C!l8@<$t,{YUr4K,QJGHSvS~U]H`<+L*x?eGzSk>XH\\W:AK\\j?@?c1o<k;j'Ei/UL)!*0\n    ILwSR)J\\bc)gjz!rrGQ2#i*f:M:ydhK}jp4dWQW?;0{,#iWrCV$4~%e/3)$1/D\nMIME-Version: 1.0\nContent-Type: text/plain; charset=us-ascii\nX-Loop: exmh-workers@spamassassin.taint.org\nSender: exmh-workers-admin@spamassassin.taint.org\nErrors-To: exmh-workers-admin@spamassassin.taint.org\nX-Beenthere: exmh-workers@spamassassin.taint.org\nX-Mailman-Version: 2.0.1\nPrecedence: bulk\nList-Help: <mailto:exmh-workers-request@spamassassin.taint.org?subject=help>\nList-Post: <mailto:exmh-workers@spamassassin.taint.org>\nList-Subscribe: <https://listman.spamassassin.taint.org/mailman/listinfo/exmh-workers>,\n    <mailto:exmh-workers-request@redhat.com?subject=subscribe>\nList-Id: Discussion list for EXMH developers <exmh-workers.spamassassin.taint.org>\nList-Unsubscribe: <https://listman.spamassassin.taint.org/mailman/listinfo/exmh-workers>,\n    <mailto:exmh-workers-request@redhat.com?subject=unsubscribe>\nList-Archive: <https://listman.spamassassin.taint.org/mailman/private/exmh-workers/>\nDate: Wed, 28 Aug 2002 10:32:42 -0700\n\n\n>>>Robert Elz said:\n >     Date:        Wed, 28 Aug 2002 09:22:34 -0500\n >     From:        Chris Garrigues <cwg-dated-1030976555.34ad5b@DeepEddy.Co\nm>\n >     Message-ID:  <1030544555.28815.TMDA@deepeddy.vircio.com>\n > \n > \n >   | so I'll probably poke around at the sequences performance issues,\n > \n > Well, there's this wonderful piece of code in MhSeqExpand ...\n > \n >     # Hack to weed out sequence numbers for messages that don't exist\n >     foreach m $rseq {\n >         if ![file exists $mhProfile(path)/$folder/$m] {\n >             Exmh_Debug $mhProfile(path)/$folder/$m not found\n >             set ix [lsearch $seq $m]\n >             set seq [lreplace $seq $ix $ix]\n >         } else {\n >             # Real hack\n\nAt least I'm up-front about my hacks :-)\n\n >             break\n >         }\n >     }\n > \n > which is going to run slow if a sequence happens to start with a bunch\n > of messages that don't exist.   I'm not sure why it is important that the\n > first message in the sequence returned exists, but not necessarily any\n > of the others, but I'm sure glad it is, as MhSeqExpand gets called lots,\n > and I don't know if I could cope if it were checking every file in the\n > sequences it is looking at, all the time...\n\nThat was my thinking.  My recollection about the first message being valid\nis that the ftoc code wants to find that message to start its highlighting,\nfor example, or you are selecting a message to display.\n\n > It may help to keep a list of the valid message numbers for the current\n > folder (though that would then need to be verified against changes to the\n > directory).   Does tcl have a directory read function?   I assume so...\n\nglob -nocomplain $mhProfile(path)/$folder *\nwill return an unsorted list of the directory's contents.\nBut the thought of keeping an in memory list of valid messages is not fun.\nExmh already maintains in-core lists of messages in sequences, which is\nalready pretty tricky\n\n > Mh_Sequence also goes and rereads the files (.mh_sequences and the\n > context file) but I'm not sure how frequently that one is called.\n\nIn some places I maintain caches of files by checking their modify time,\nbut the sequence files are soo small that by the time you stat them to\ncheck their date stamp, you could just read them again.  Also, now that\nwe checkpoint message state on every message view, that file will change\nevery time.  In the old days exmh used to cache a bunch of state about\nthe folder.\n\n--\nBrent Welch\nSoftware Architect, Panasas Inc\nPioneering the World's Most Scalable and Agile Storage Network\nwww.panasas.com\nwelch@panasas.com\n\n\n\n\n_______________________________________________\nExmh-workers mailing list\nExmh-workers@redhat.com\nhttps://listman.redhat.com/mailman/listinfo/exmh-workers\n\n"}