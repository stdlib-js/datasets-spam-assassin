{"id":"01732","group":"easy-ham-1","checksum":{"type":"MD5","value":"6c654f95a549a4f09daff21def44f511"},"text":"Return-Path: tim.one@comcast.net\nDelivery-Date: Mon Sep  9 15:45:52 2002\nFrom: tim.one@comcast.net (Tim Peters)\nDate: Mon, 09 Sep 2002 10:45:52 -0400\nSubject: [Spambayes] test sets?\nIn-Reply-To: <200209091410.g89EA0428928@pcp02138704pcs.reston01.va.comcast.net>\nMessage-ID: <LNBBLJKPBEHFEDALKOLCIECBBDAB.tim.one@comcast.net>\n\n[Tim]\n>> I'd prefer to strip HTML tags from everything, but last time I tried\n>> that it still had bad effects on the error rates in my corpora\n\n[Guido]\n> Your corpora are biased in this respect though -- newsgroups have a\n> strong social taboo on posting HTML, but in many people's personal\n> inboxes it is quite abundant.\n\nWe're in violent agreement there:  the comments in tokenizer.py say that as\nstrongly as possible, and I've repeated it endlessly here too.  But so long\nas I was the only one doing serious testing, it was a dubious idea to make\nthe code maximally clumsy for me to use on the c.l.py task <wink>.\n\n> Getting a good ham corpus may prove to be a bigger hurdle than I\n> though!  My own saved mail doesn't reflect what I receive, since I\n> save and throw away selectively (much more so than in the past :-).\n\nYup, the system picks up on *everything* in the tokens.  Graham's proposed\n\"delete as ham\" and \"delete as spam\" keys would probably work very well for\nmotivated geeks.  But Paul Svensson has pointed out here that they probably\nwouldn't work nearly so well for real people.\n\n>> Ah!  That explains why the HTML tags didn't get stripped.  I'd again\n>> offer to add an optional argument to tokenize() so that they'd get\n>> stripped here too, but if it gets glossed over a third time that\n>> would feel too much like a loss <wink>.\n\n> I'll bite.  Sounds like a good idea to strip the HTML in this case;\n> I'd like to see how this improves the f-p rate on this corpus.\n\nI'll soon check in this change:\n\n    def tokenize_body(self, msg, retain_pure_html_tags=False):\n                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        \"\"\"Generate a stream of tokens from an email Message.\n\n        If a multipart/alternative section has both text/plain and text/html\n        sections, the text/html section is ignored.  This may not be a good\n        idea (e.g., the sections may have different content).\n\n        HTML tags are always stripped from text/plain sections.\n\n        By default, HTML tags are also stripped from text/html sections.\n        However, doing so hurts the false negative rate on Tim's\n        comp.lang.python tests (where HTML-only messages are almost never\n        legitimate traffic).  If optional argument retain_pure_html_tags\n        is specified and True, HTML tags are retained in text/html sections.\n        \"\"\"\n\nYou should do a cvs up and establish a new baseline first, as I checked in a\npure-win change in the wee hours that cut the fp and fn rates in my tests.\n\n"}