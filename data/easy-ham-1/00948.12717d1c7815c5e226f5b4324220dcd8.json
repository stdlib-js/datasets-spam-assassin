{"id":"00948","group":"easy-ham-1","checksum":{"type":"MD5","value":"12717d1c7815c5e226f5b4324220dcd8"},"text":"From exmh-workers-admin@redhat.com  Mon Aug 26 19:24:06 2002\nReturn-Path: <exmh-workers-admin@spamassassin.taint.org>\nDelivered-To: yyyy@localhost.netnoteinc.com\nReceived: from localhost (localhost [127.0.0.1])\n\tby phobos.labs.netnoteinc.com (Postfix) with ESMTP id 8FC6844155\n\tfor <jm@localhost>; Mon, 26 Aug 2002 14:24:03 -0400 (EDT)\nReceived: from phobos [127.0.0.1]\n\tby localhost with IMAP (fetchmail-5.9.0)\n\tfor jm@localhost (single-drop); Mon, 26 Aug 2002 19:24:03 +0100 (IST)\nReceived: from listman.spamassassin.taint.org (listman.spamassassin.taint.org [66.187.233.211]) by\n    dogma.slashnull.org (8.11.6/8.11.6) with ESMTP id g7QIPeZ04341 for\n    <jm-exmh@jmason.org>; Mon, 26 Aug 2002 19:25:40 +0100\nReceived: from listman.spamassassin.taint.org (localhost.localdomain [127.0.0.1]) by\n    listman.redhat.com (Postfix) with ESMTP id 421593FA4E; Mon, 26 Aug 2002\n    14:25:52 -0400 (EDT)\nDelivered-To: exmh-workers@listman.spamassassin.taint.org\nReceived: from int-mx1.corp.spamassassin.taint.org (int-mx1.corp.spamassassin.taint.org\n    [172.16.52.254]) by listman.redhat.com (Postfix) with ESMTP id 202603EA03\n    for <exmh-workers@listman.redhat.com>; Mon, 26 Aug 2002 14:23:02 -0400\n    (EDT)\nReceived: (from mail@localhost) by int-mx1.corp.spamassassin.taint.org (8.11.6/8.11.6)\n    id g7QIMwx05888 for exmh-workers@listman.redhat.com; Mon, 26 Aug 2002\n    14:22:58 -0400\nReceived: from mx1.spamassassin.taint.org (mx1.spamassassin.taint.org [172.16.48.31]) by\n    int-mx1.corp.redhat.com (8.11.6/8.11.6) with SMTP id g7QIMwY05884 for\n    <exmh-workers@redhat.com>; Mon, 26 Aug 2002 14:22:58 -0400\nReceived: from turing-police.cc.vt.edu (turing-police.cc.vt.edu\n    [198.82.160.121]) by mx1.redhat.com (8.11.6/8.11.6) with SMTP id\n    g7QI85l24455 for <exmh-workers@redhat.com>; Mon, 26 Aug 2002 14:08:05\n    -0400\nReceived: from turing-police.cc.vt.edu (localhost [127.0.0.1]) by\n    turing-police.cc.vt.edu (8.12.5/8.12.5) with ESMTP id g7QIMk7P005756;\n    Mon, 26 Aug 2002 14:22:46 -0400\nMessage-Id: <200208261822.g7QIMk7P005756@turing-police.cc.vt.edu>\nX-Mailer: exmh version 2.5 07/13/2001 with nmh-1.0.4+dev\nTo: Anders Eriksson <aeriksson@fastmail.fm>\nCc: exmh-workers@spamassassin.taint.org\nSubject: Re: Exmh && speed\nIn-Reply-To: Your message of\n    \"Mon, 26 Aug 2002 20:00:36 +0200.\"\n    <20020826180041.913C73F05@milou.dyndns.org>\nFrom: Valdis.Kletnieks@vt.edu\nX-Url: http://black-ice.cc.vt.edu/~valdis/\nX-Face-Viewer: See ftp://cs.indiana.edu/pub/faces/index.html to decode picture\nX-Face: 34C9$Ewd2zeX+\\!i1BA\\j{ex+$/V'JBG#;3_noWWYPa\"|,I#`R\"{n@w>#:{)FXyiAS7(8t(\n    ^*w5O*!8O9YTe[r{e%7(yVRb|qxsRYw`7J!`AM}m_SHaj}f8eb@d^L>BrX7iO[<!v4-0bVIpaxF#-)\n    %9#a9h6JXI|T|8o6t\\V?kGl]Q!1V]GtNliUtz:3},0\"hkPeBuu%E,j(:\\iOX-P,t7lRR#\nReferences: <20020826180041.913C73F05@milou.dyndns.org>\nMIME-Version: 1.0\nContent-Type: multipart/signed;\n    boundary=\"==_Exmh_-1913987426P\";\n    micalg=pgp-sha1;\n    protocol=\"application/pgp-signature\"\nContent-Transfer-Encoding: 7bit\nX-Loop: exmh-workers@spamassassin.taint.org\nSender: exmh-workers-admin@spamassassin.taint.org\nErrors-To: exmh-workers-admin@spamassassin.taint.org\nX-Beenthere: exmh-workers@spamassassin.taint.org\nX-Mailman-Version: 2.0.1\nPrecedence: bulk\nList-Help: <mailto:exmh-workers-request@spamassassin.taint.org?subject=help>\nList-Post: <mailto:exmh-workers@spamassassin.taint.org>\nList-Subscribe: <https://listman.spamassassin.taint.org/mailman/listinfo/exmh-workers>,\n    <mailto:exmh-workers-request@redhat.com?subject=subscribe>\nList-Id: Discussion list for EXMH developers <exmh-workers.spamassassin.taint.org>\nList-Unsubscribe: <https://listman.spamassassin.taint.org/mailman/listinfo/exmh-workers>,\n    <mailto:exmh-workers-request@redhat.com?subject=unsubscribe>\nList-Archive: <https://listman.spamassassin.taint.org/mailman/private/exmh-workers/>\nDate: Mon, 26 Aug 2002 14:22:46 -0400\n\n--==_Exmh_-1913987426P\nContent-Type: text/plain; charset=us-ascii\n\nOn Mon, 26 Aug 2002 20:00:36 +0200, Anders Eriksson <aeriksson@fastmail.fm>  said:\n\n> I checked on a number of small messages in a big folder (~10000 \n> msgs). The delay of the Next button has increased considerably:\n> \n> 2.5-release: 350-450 msec\n> latest cvs: 1000-12000 msec\n\nI'm not seeing a hit on 'next'. A quick \"just pound on 'next' and watch the\nwall clock\" test shows me able to go through 20 messages in under 5 seconds,\nso it's well under 250ms per switch, but I'm seeing a really piggy CPU spike\n(100% for a few seconds) in the 'flist' code.  Of course, it seems to be\nrelated to number-of-folders:\n\n[~] wc Mail/.folders\n    131     131    1122 Mail/.folders\n\nIt's particularly annoying because things just hose-and-hang for 10 seconds, so\nwhen it hits, you have a long latency before what you're doing actually\nhappens...\n\n14:08:54 Background_DoPeriodic flist\n14:08:54 Flist_FindSeqs reset=0\n14:08:54 FlistFindStart reset=0 active=0\n14:08:56 Reading /home/valdis/Mail/exmh/.mh_sequences\n14:08:56 exmh has 1 msgs in unseen\n14:08:56 1 unseen message in 1 folder\n14:08:56 {In FlagInner up iconup labelup}\n14:08:56 {Setting flag glyph to iconup}\n14:08:56 {Set flag state to up}\n14:08:58 Reading /home/valdis/Mail/list-spams/.mh_sequences\n14:08:58 list-spams has 1 msgs in unseen\n14:08:58 2 unseen messages in 2 folders\n14:08:58 {In FlagInner up iconup labelup}\n14:09:02 Reading /home/valdis/Mail/trash/.mh_sequences\n14:09:02 trash has 2 msgs in pseq\n14:09:03 /home/valdis/Mail/xemacs/7508 not found\n14:09:03 /home/valdis/Mail/xemacs/7507 not found\n14:09:03 /home/valdis/Mail/xemacs/7508 not found\n14:09:03 /home/valdis/Mail/xemacs/7507 not found\n14:09:03 {pseq: 7506-7508 => 7506}\n14:09:03 Writing /home/valdis/Mail/xemacs/.mh_sequences\n14:09:03 xemacs has 1 msgs in pseq\n14:09:03 Flist_Done\n\nAnd it takes a hit even if there's no new mail:\n\n14:11:03 Background_DoPeriodic flist\n14:11:03 Flist_FindSeqs reset=0\n14:11:03 FlistFindStart reset=0 active=0\n14:11:12 Flist_Done\n14:11:12 Flist_FindSeqs end {9018315 microseconds per iteration}\n\nI'm perfectly willing to can-opener that code and see where the CPU is\ngoing, but only if nobody is slapping their forehead and mumbling about\na brown-paper-bag bug... ;)\n-- \n\t\t\t\tValdis Kletnieks\n\t\t\t\tComputer Systems Senior Engineer\n\t\t\t\tVirginia Tech\n\n\n--==_Exmh_-1913987426P\nContent-Type: application/pgp-signature\n\n-----BEGIN PGP SIGNATURE-----\nVersion: GnuPG v1.0.7 (GNU/Linux)\nComment: Exmh version 2.5 07/13/2001\n\niD8DBQE9anH1cC3lWbTT17ARAvzuAKDShPISux8PrLitv4WIzUiCxfj60gCgvEPy\nQnWKrjGimFVroJcIHICt2e4=\n=T3wR\n-----END PGP SIGNATURE-----\n\n--==_Exmh_-1913987426P--\n\n\n\n_______________________________________________\nExmh-workers mailing list\nExmh-workers@redhat.com\nhttps://listman.redhat.com/mailman/listinfo/exmh-workers\n\n"}