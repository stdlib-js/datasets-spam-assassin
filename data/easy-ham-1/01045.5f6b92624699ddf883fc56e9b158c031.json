{"id":"01045","group":"easy-ham-1","checksum":{"type":"MD5","value":"5f6b92624699ddf883fc56e9b158c031"},"text":"From rpm-list-admin@freshrpms.net  Thu Aug 29 11:03:42 2002\nReturn-Path: <rpm-zzzlist-admin@freshrpms.net>\nDelivered-To: yyyy@localhost.netnoteinc.com\nReceived: from localhost (localhost [127.0.0.1])\n\tby phobos.labs.netnoteinc.com (Postfix) with ESMTP id 87D8943F99\n\tfor <jm@localhost>; Thu, 29 Aug 2002 06:03:34 -0400 (EDT)\nReceived: from phobos [127.0.0.1]\n\tby localhost with IMAP (fetchmail-5.9.0)\n\tfor jm@localhost (single-drop); Thu, 29 Aug 2002 11:03:34 +0100 (IST)\nReceived: from egwn.net (ns2.egwn.net [193.172.5.4]) by\n    dogma.slashnull.org (8.11.6/8.11.6) with ESMTP id g7T9uqZ07335 for\n    <jm-rpm@jmason.org>; Thu, 29 Aug 2002 10:56:52 +0100\nReceived: from auth02.nl.egwn.net (localhost [127.0.0.1]) by egwn.net\n    (8.11.6/8.11.6/EGWN) with ESMTP id g7T9s2J15334; Thu, 29 Aug 2002 11:54:02\n    +0200\nReceived: from smtp-send.myrealbox.com (smtp-send.myrealbox.com\n    [192.108.102.143]) by egwn.net (8.11.6/8.11.6/EGWN) with ESMTP id\n    g7T9rkJ15284 for <rpm-list@freshrpms.net>; Thu, 29 Aug 2002 11:53:46 +0200\nReceived: from myrealbox.com danielpavel@smtp-send.myrealbox.com\n    [194.102.210.216] by smtp-send.myrealbox.com with NetMail SMTP Agent\n    $Revision:   3.11  $ on Novell NetWare via secured & encrypted transport\n    (TLS); Thu, 29 Aug 2002 03:53:42 -0600\nMessage-Id: <3D6DED60.7070107@myrealbox.com>\nFrom: Daniel Pavel <danielpavel@myrealbox.com>\nUser-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.1)\n    Gecko/20020826\nX-Accept-Language: en-us, en\nMIME-Version: 1.0\nTo: rpm-zzzlist@freshrpms.net\nSubject: Re: ALSA (almost) made easy\nReferences: <20020828004215.4bca2588.matthias@rpmforge.net>\n    <1030507320.3214.39.camel@herald.dragonsdawn.net>\n    <20020828100430.378c3856.matthias@rpmforge.net>\n    <1030546780.3214.54.camel@herald.dragonsdawn.net>\n    <20020828112645.B13047@ti19>\n    <1030551945.10627.4.camel@wanderlust.prognet.com>\n    <20020828190006.2200a154.matthias@rpmforge.net>\n    <1030567737.10901.9.camel@bobcat.ods.org>\n    <1030568564.10902.22.camel@bobcat.ods.org>\n    <20020829000606.5906404a.matthias@egwn.net>\n    <1030574318.1651.30.camel@bobcat.ods.org>\n    <20020829005025.160073af.matthias@egwn.net>\nContent-Type: multipart/mixed; boundary=\"------------090303060407010605030507\"\nX-Mailscanner: Found to be clean, Found to be clean\nSender: rpm-zzzlist-admin@freshrpms.net\nErrors-To: rpm-zzzlist-admin@freshrpms.net\nX-Beenthere: rpm-zzzlist@freshrpms.net\nX-Mailman-Version: 2.0.11\nPrecedence: bulk\nReply-To: rpm-zzzlist@freshrpms.net\nList-Help: <mailto:rpm-zzzlist-request@freshrpms.net?subject=help>\nList-Post: <mailto:rpm-zzzlist@freshrpms.net>\nList-Subscribe: <http://lists.freshrpms.net/mailman/listinfo/rpm-zzzlist>,\n    <mailto:rpm-list-request@freshrpms.net?subject=subscribe>\nList-Id: Freshrpms RPM discussion list <rpm-zzzlist.freshrpms.net>\nList-Unsubscribe: <http://lists.freshrpms.net/mailman/listinfo/rpm-zzzlist>,\n    <mailto:rpm-list-request@freshrpms.net?subject=unsubscribe>\nList-Archive: <http://lists.freshrpms.net/pipermail/rpm-zzzlist/>\nX-Original-Date: Thu, 29 Aug 2002 12:46:08 +0300\nDate: Thu, 29 Aug 2002 12:46:08 +0300\n\nThis is a multi-part message in MIME format.\n--------------090303060407010605030507\nContent-Type: text/plain; charset=us-ascii; format=flowed\nContent-Transfer-Encoding: 7bit\n\nMatthias Saou wrote:\n > I guess/hope some other people from the list will try it out ;-)\n >\n > Both problems you reported (libasound.so and wrong xine dependency) are now\n > fixed in the current packages.\n >\n > Oh, it's maybe also worth pointing out : I've implemented at last sorting\n > by both last change date and alphabetically for my \"build list\" in the php\n > code : http://freshrpms.net/builds/\n >\n > And yes, I accept patches/comments/suggestions about all those spec files!\n\nSure thing :)\n\nI've added to the spec some flags to remove OSS and ISA-PNP support at\nbuild time if one wishes to, so is's possible to do a\n\n\trpmbuild --recompile <rpm> --without oss --without isapnp\n\n(I haven't included OSS in my 2.4.19, because VT82433 on my motherboard\nis not supported :( yet, and I'm too lazy to recompile the kernel :)).\n\nAlso, having the kernel compiled by me, I have no kernel-source package\ninstalled.  I've added a flag \"kernsrc\", that also can be used\n--without, to remove the dependency for kernel-source at build time.  It\nwould be nice to check the correct kernel include files actually exist\n(/lib/modules/`uname -r`/build/include/linux/*.h), though; however, I'm\na beginner in RPM building -- is it possible to BuildRequire for a file\nnot provided by a package at all?  I've googled a bit, and found no way\nto do that.\n\nI was also considering adding some sort of flag for the --with-cards\noption in alsa's ./configure, but don't know how to do that.  Only found\nout about --without from your first alsa-driver.spec, and existing RPM docs \ndon't help much.\n\n\nOh, and one more thing :).  At first I've installed the first version of\nalsa-driver for 2.4.18-10, although I don't have that kernel, to supply\nthe dependency for the rest of the alsa rpm's, and compiled the modules\nfrom source.  It created the /dev files and all.\n\nThen wanted to make my own rpm for 2.4.19, so now I'm trying to rpmbuild\nthe alsa-kernel package.  Removed all alsa rpms, and tried my spec:\n\nrpmbuild --ba alsa-driver.spec.mine --without oss --without isapnp\n--without kernsrc\n\nBut I get this:\n\n==[long successful compile snipped]=====================================\nwarning: File listed twice: /dev/adsp\nwarning: File listed twice: /dev/amidi\nFinding  Provides: /usr/lib/rpm/find-provides\nFinding  Requires: /usr/lib/rpm/find-requires\nPreReq: /bin/sh /bin/sh rpmlib(PayloadFilesHavePrefix) <= 4.0-1\nrpmlib(CompressedFileNames) <= 3.0.4-1\nRequires(interp): /bin/sh /bin/sh\nRequires(rpmlib): rpmlib(PayloadFilesHavePrefix) <= 4.0-1\nrpmlib(CompressedFileNames) <= 3.0.4-1\nRequires(post): /bin/sh\nRequires(postun): /bin/sh\nRequires: alsa-kernel = 0.9.0rc3 /sbin/depmod\nProcessing files: alsa-kernel-0.9.0rc3-fr4_2.4.19\nFinding  Provides: /usr/lib/rpm/find-provides\nFinding  Requires: /usr/lib/rpm/find-requires\nPreReq: rpmlib(PayloadFilesHavePrefix) <= 4.0-1\nrpmlib(CompressedFileNames) <= 3.0.4-1\nRequires(rpmlib): rpmlib(PayloadFilesHavePrefix) <= 4.0-1\nrpmlib(CompressedFileNames) <= 3.0.4-1\nRequires: alsa-driver = 0.9.0rc3 kernel = 2.4.19\nChecking for unpackaged file(s): /usr/lib/rpm/check-files\n/var/tmp/alsa-driver-0.9.0rc3-root\nerror: Installed (but unpackaged) file(s) found:\n     /etc/makedev.d/00macros\n     /etc/rc.d/init.d/alsasound\n\n\nRPM build errors:\n      File listed twice: /dev/adsp\n      File listed twice: /dev/amidi\n      Installed (but unpackaged) file(s) found:\n     /etc/makedev.d/00macros\n     /etc/rc.d/init.d/alsasound\n========================================================================\n\nLike I said, I'm a beginned with RPM building, so I don't understand\nmuch of what's going on here.  The 00macros file is from the MAKEDEV\nrpm, and alsasound was supposed to be installed by alsa-driver, I think.\n   It is not in the filesystem, anyway.\n\nI've looked in /var/tmp/alsa-driver-0.9.0rc3-root, they are there in\netc.  For 00macros I think the part that does it is this line\nin alsa-driver.spec:\n\ncp -a %{_sysconfdir}/makedev.d/00macros /{buildroot}%{_sysconfdir}/makedev.d/\n\nAnd alsasound is installed by %{BUILDIDR}/Makefile.\n\n\nOh, and I think I've forgot to mention, I'm running beta-null :).\n\n > Matthias\n\n-silent\n\n-- \n... And on the seventh day, God was arrested for tresspassing.\n\n\n--------------090303060407010605030507\nContent-Type: text/plain;\n name=\"alsa-driver.spec.patch\"\nContent-Transfer-Encoding: 7bit\nContent-Disposition: inline;\n filename=\"alsa-driver.spec.patch\"\n\n6a7,17\n>\n> %define withoss               yes\n> %{?_without_oss:%define withoss no}\n>\n> %define withisapnp    auto\n> %{?_without_isapnp:%define withisapnp no}\n>\n> %define kernsrc       1\n> %{?_without_kernsrc:%define kernsrc 0}\n>\n>\n20a32\n> %if %{kernsrc}\n21a34,36\n> %else\n> BuildRequires: MAKEDEV\n> %endif\n64c79\n< %configure\n---\n> %configure --with-oss=%{withoss} --with-isapnp=%{withisapnp}\n119a135,137\n> * Thu Aug 29 2002 Daniel Pavel <danielpavel@myrealbox.com>\n> - Added OSS and ISA-PNP build-time flags.\n> - Added kernel-source requirement flag.\n\n\n--------------090303060407010605030507--\n\n\n_______________________________________________\nRPM-List mailing list <RPM-List@freshrpms.net>\nhttp://lists.freshrpms.net/mailman/listinfo/rpm-list\n\n"}