{"id":"00255","group":"easy-ham-1","checksum":{"type":"MD5","value":"11be25bd4a3d55702ed4a1f13e7d2a3d"},"text":"From ilug-admin@linux.ie  Fri Sep  6 11:40:54 2002\nReturn-Path: <ilug-admin@linux.ie>\nDelivered-To: zzzz@localhost.spamassassin.taint.org\nReceived: from localhost (jalapeno [127.0.0.1])\n\tby spamassassin.taint.org (Postfix) with ESMTP id 7D5C516F19\n\tfor <zzzz@localhost>; Fri,  6 Sep 2002 11:39:13 +0100 (IST)\nReceived: from jalapeno [127.0.0.1]\n\tby localhost with IMAP (fetchmail-5.9.0)\n\tfor zzzz@localhost (single-drop); Fri, 06 Sep 2002 11:39:13 +0100 (IST)\nReceived: from lugh.tuatha.org (root@lugh.tuatha.org [194.125.145.45]) by\n    dogma.slashnull.org (8.11.6/8.11.6) with ESMTP id g86AQeC32186 for\n    <zzzz-ilug@spamassassin.taint.org>; Fri, 6 Sep 2002 11:26:40 +0100\nReceived: from lugh (root@localhost [127.0.0.1]) by lugh.tuatha.org\n    (8.9.3/8.9.3) with ESMTP id LAA06471; Fri, 6 Sep 2002 11:24:33 +0100\nX-Authentication-Warning: lugh.tuatha.org: Host root@localhost [127.0.0.1]\n    claimed to be lugh\nReceived: from web12102.mail.yahoo.com (web12102.mail.yahoo.com\n    [216.136.172.22]) by lugh.tuatha.org (8.9.3/8.9.3) with SMTP id LAA06436\n    for <ilug@linux.ie>; Fri, 6 Sep 2002 11:24:22 +0100\nMessage-Id: <20020906102417.66047.qmail@web12102.mail.yahoo.com>\nReceived: from [159.134.146.155] by web12102.mail.yahoo.com via HTTP;\n    Fri, 06 Sep 2002 11:24:17 BST\nDate: Fri, 6 Sep 2002 11:24:17 +0100 (BST)\nFrom: =?iso-8859-1?q?Colin=20Nevin?= <colin_nevin@yahoo.com>\nTo: ilug@linux.ie\nMIME-Version: 1.0\nContent-Type: text/plain; charset=iso-8859-1\nContent-Transfer-Encoding: 8bit\nSubject: [ILUG] semaphores on linux RH7.3\nSender: ilug-admin@linux.ie\nErrors-To: ilug-admin@linux.ie\nX-Mailman-Version: 1.1\nPrecedence: bulk\nList-Id: Irish Linux Users' Group <ilug.linux.ie>\nX-Beenthere: ilug@linux.ie\n\nHi All,\n\nI have a question which is a bit tricky and was\nwondering of anyone has come across this problem\nbefore or could point me in the right direction.\n\nI am involved in porting a SCO unix application to\nLinux, and we have encountered a problem with the way\nsemaphores  are being handled. The application uses\nmulitple processes to run application code with the\nmain process known as the bsh which controls all i/o\nbe it screen, or file i/o, syncronisation is handled\nvia semaphores.\n\nIn certain circumstances the main process and the\napplication child process seem to lock up both waiting\nfor the syncronisation semaphores to change state, I\nhave attached ddd to the processes and it seems that\nthe semaphore code is doing the correct things for\nsyncronisation but the processes stay stuck in the\nsemop() system call.\n\nI have also noticed that if I introduce a slight delay\nbetween changing semaphore states the problem goes\naway, but this causes our entire application to run\nreally sloooww !! lol\n\nIs there anything weird or different with the standard\nimplemenation of semaphores on modern linux that could\ncause a semop() to fail to pick up the change in state\n\nin a semaphore immediately?\n\nSetting sem_flg = IPC_NOWAIT and checking for errno ==\nEAGAIN and recalling semop() if the semop() call fails\n(-1) also fixes the problem but again system\nperformance goes down the toilet.\n\nboth the parent controlling process run as the same\nuid, and the parent creates the semaphores with\npermissions 0666.\n\nAny pointers would be appreciated!\n\nRgds,\n\nColin Nevin \n\n__________________________________________________\nDo You Yahoo!?\nEverything you'll ever need on one web page\nfrom News and Sport to Email and Music Charts\nhttp://uk.my.yahoo.com\n\n-- \nIrish Linux Users' Group: ilug@linux.ie\nhttp://www.linux.ie/mailman/listinfo/ilug for (un)subscription information.\nList maintainer: listmaster@linux.ie\n\n\n"}