{"id":"01680","group":"easy-ham-1","checksum":{"type":"MD5","value":"3c26c587b4fe3b681981c38f90593e02"},"text":"Return-Path: tim.one@comcast.net\nDelivery-Date: Sat Sep  7 01:06:56 2002\nFrom: tim.one@comcast.net (Tim Peters)\nDate: Fri, 06 Sep 2002 20:06:56 -0400\nSubject: [Spambayes] Ditching WordInfo\nIn-Reply-To: <w53r8g6brus.fsf@woozle.org>\nMessage-ID: <LNBBLJKPBEHFEDALKOLCOEKKBCAB.tim.one@comcast.net>\n\n[Neale Pickett]\n> I hacked up something to turn WordInfo into a tuple before pickling,\n\nThat's what WordInfo.__getstate__ does.\n\n> and then turn the tuple back into WordInfo right after unpickling.\n\nLikewise for WordInfo.__setstate__.\n\n> Without this hack, my database was 21549056 bytes.  After, it's 9945088\nbytes.\n> That's a 50% savings, not a bad optimization.\n\nI'm not sure what you're doing, but suspect you're storing individual\nWordInfo pickles.  If so, most of the administrative pickle bloat is due to\nthat, and doesn't happen if you pickle an entire classifier instance\ndirectly.\n\n> So my question is, would it be too painful to ditch WordInfo in favor of\n> a straight out tuple?  (Or list if you'd rather, although making it a\n> tuple has the nice side-effect of forcing you to play nice with my\n> DBDict class).\n>\n> I hope doing this sort of optimization isn't too far distant from the\n> goal of this project, even though README.txt says it is :)\n>\n> Diff attached.  I'm not comfortable checking this in,\n\nI think it's healthy that you're uncomfortable checking things in with\n\n> +            # XXX: kludge kludge kludge.\n\ncomments <wink>.\n\n> since I don't really like how it works (I'd rather just get rid of\nWordInfo).\n> But I guess it proves the point :)\n\nI'm not interested in optimizing anything yet, and get many benefits from\nthe *ease* of working with utterly vanilla Python instance objects.  Lots of\ncode all over picks these apart for display and analysis purposes.  Very few\npeople have tried this code yet, and there are still many questions about it\n(see, e.g., Jeremy's writeup of his disappointing first-time experiences\ntoday).  Let's keep it as easy as possible to modify for now.  If you're\ndesparate to save memory, write a subclass?\n\nOther people are free to vote in other directions, of course <wink>.\n\n"}