{"id":"01503","group":"easy-ham-1","checksum":{"type":"MD5","value":"5e13994a5676296ed31b14e83367031c"},"text":"From spamassassin-talk-admin@lists.sourceforge.net  Tue Sep 24 23:33:11 2002\nReturn-Path: <spamassassin-talk-admin@example.sourceforge.net>\nDelivered-To: yyyy@localhost.spamassassin.taint.org\nReceived: from localhost (jalapeno [127.0.0.1])\n\tby jmason.org (Postfix) with ESMTP id 2EDC616F03\n\tfor <jm@localhost>; Tue, 24 Sep 2002 23:33:10 +0100 (IST)\nReceived: from jalapeno [127.0.0.1]\n\tby localhost with IMAP (fetchmail-5.9.0)\n\tfor jm@localhost (single-drop); Tue, 24 Sep 2002 23:33:10 +0100 (IST)\nReceived: from usw-sf-list2.sourceforge.net (usw-sf-fw2.sourceforge.net\n    [216.136.171.252]) by dogma.slashnull.org (8.11.6/8.11.6) with ESMTP id\n    g8OMScC25067 for <jm-sa@jmason.org>; Tue, 24 Sep 2002 23:28:38 +0100\nReceived: from usw-sf-list1-b.sourceforge.net ([10.3.1.13]\n    helo=usw-sf-list1.sourceforge.net) by usw-sf-list2.sourceforge.net with\n    esmtp (Exim 3.31-VA-mm2 #1 (Debian)) id 17ty92-0008AH-00; Tue,\n    24 Sep 2002 15:27:04 -0700\nReceived: from ns1.apexvoice.com ([64.52.111.15]\n    helo=popeye.apexvoice.com) by usw-sf-list1.sourceforge.net with esmtp\n    (Exim 3.31-VA-mm2 #1 (Debian)) id 17ty84-00085i-00 for\n    <spamassassin-talk@lists.sourceforge.net>; Tue, 24 Sep 2002 15:26:04 -0700\nReceived: from sthomas (64-52-111-64.apexvoice.com [64.52.111.64]) by\n    popeye.apexvoice.com (8.12.3/8.12.3) with SMTP id g8OMPrba011319;\n    Tue, 24 Sep 2002 15:25:53 -0700\nFrom: \"Steve Thomas\" <sthomas@apexvoice.com>\nTo: \"Cheryl L. Southard\" <cld@astro.caltech.edu>,\n\t<spamassassin-talk@lists.sourceforge.net>\nSubject: RE: [SAtalk] user_prefs ignored\nMessage-Id: <PIEHJPLNKGMNAHJKHLFCCECJCEAA.sthomas@apexvoice.com>\nMIME-Version: 1.0\nContent-Type: text/plain; charset=\"us-ascii\"\nContent-Transfer-Encoding: 7bit\nX-Priority: 3 (Normal)\nX-Msmail-Priority: Normal\nX-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2911.0)\nImportance: Normal\nX-Mimeole: Produced By Microsoft MimeOLE V6.00.2800.1106\nIn-Reply-To: <20020924212731.GA24786@deimos.caltech.edu>\nX-Virus-Scanned: by amavisd-milter (http://amavis.org/)\nSender: spamassassin-talk-admin@example.sourceforge.net\nErrors-To: spamassassin-talk-admin@example.sourceforge.net\nX-Beenthere: spamassassin-talk@example.sourceforge.net\nX-Mailman-Version: 2.0.9-sf.net\nPrecedence: bulk\nList-Help: <mailto:spamassassin-talk-request@example.sourceforge.net?subject=help>\nList-Post: <mailto:spamassassin-talk@example.sourceforge.net>\nList-Subscribe: <https://example.sourceforge.net/lists/listinfo/spamassassin-talk>,\n    <mailto:spamassassin-talk-request@lists.sourceforge.net?subject=subscribe>\nList-Id: Talk about SpamAssassin <spamassassin-talk.example.sourceforge.net>\nList-Unsubscribe: <https://example.sourceforge.net/lists/listinfo/spamassassin-talk>,\n    <mailto:spamassassin-talk-request@lists.sourceforge.net?subject=unsubscribe>\nList-Archive: <http://sourceforge.net/mailarchives/forum.php?forum=spamassassin-talk>\nX-Original-Date: Tue, 24 Sep 2002 15:25:54 -0700\nDate: Tue, 24 Sep 2002 15:25:54 -0700\n\nThis is just an semi-educated guess - if I'm wrong, someone please correct\nme!\n\nSpamd setuid's to the user running spamc. Since you're calling spamc from a\nglobal procmailrc file, it's being run as root (most likely). If called as\nroot, spamd won't open user_prefs files.\n\n>>From the spamc man page:\n\n       -u username\n           This argument has been semi-obsoleted.  To have spamd use\n           per-user-config files, run spamc as the user whose config\n           files spamd should load.  If you're running spamc as some\n           other user though (eg. root, mail, nobody, cyrus, etc.)\n           then you can still use this flag.\n\n\nThe solution is to set DROPPRIVS=yes in /etc/procmailrc, just before running\nspamc. From the procmailrc man page:\n\n       DROPPRIVS   If set to `yes' procmail will drop all privileges\n                   it might have had (suid or sgid).  This  is  only\n                   useful  if  you  want  to guarantee that the bottom\n                   half of the /etc/procmailrc file is executed on\n                   behalf of the recipient.\n\n\nI hope that helps, and I also hope it's right!\n\nSt-\n\n\n| -----Original Message-----\n| From: spamassassin-talk-admin@example.sourceforge.net\n| [mailto:spamassassin-talk-admin@lists.sourceforge.net]On Behalf Of\n| Cheryl L. Southard\n| Sent: Tuesday, September 24, 2002 2:28 PM\n| To: spamassassin-talk@example.sourceforge.net\n| Subject: [SAtalk] user_prefs ignored\n|\n|\n| Hi All,\n|\n| I am running SpamAssassin 2.41 with procmail as my local delivery agent\n| with sendmail.  I use spamc/spamd so that it runs site-wide from\n| /etc/procmailrc.\n|\n| spamd is run as root with the flags \"-d -a -c\", and spamc isn't run with\n| any flags.\n|\n| When I was testing the program, I deployed spamc from my personal\n| ~/.procmailrc file, my ~/.spamassassin/user_prefs file was read each time.\n| I can see this because I have a non-default \"required_hits\" value which\n| gets reported in every e-mail on the \"X-Spam-Status\" line.\n|\n| Now that I run spamc from the global /etc/procmailrc file, my\n| ~/.spamassassin/user_prefs file is no longer being read or processed from\n| e-mails from outside computers.  The \"required_hits\" value gets set back\n| to the one in /etc/mail/spamassassin/local.cf.  However, if I send local\n| e-mail, my user_prefs file is read and processed correctly.\n|\n| Does anyone know how to fix this problem?  if this is a spamassassin or\n| procmail bug?\n|\n| Thanks,\n|\n| Cheryl\n|\n| --\n| Cheryl Southard\n| cld@astro.caltech.edu\n|\n|\n| -------------------------------------------------------\n| This sf.net email is sponsored by:ThinkGeek\n| Welcome to geek heaven.\n| http://thinkgeek.com/sf\n| _______________________________________________\n| Spamassassin-talk mailing list\n| Spamassassin-talk@lists.sourceforge.net\n| https://lists.sourceforge.net/lists/listinfo/spamassassin-talk\n|\n\n\n\n-------------------------------------------------------\nThis sf.net email is sponsored by:ThinkGeek\nWelcome to geek heaven.\nhttp://thinkgeek.com/sf\n_______________________________________________\nSpamassassin-talk mailing list\nSpamassassin-talk@lists.sourceforge.net\nhttps://lists.sourceforge.net/lists/listinfo/spamassassin-talk\n\n\n"}