{"id":"01046","group":"easy-ham-1","checksum":{"type":"MD5","value":"f0371dba9ae76787d5541e73a09099f9"},"text":"From rpm-list-admin@freshrpms.net  Thu Aug 29 11:37:45 2002\nReturn-Path: <rpm-zzzlist-admin@freshrpms.net>\nDelivered-To: yyyy@localhost.netnoteinc.com\nReceived: from localhost (localhost [127.0.0.1])\n\tby phobos.labs.netnoteinc.com (Postfix) with ESMTP id A351843F99\n\tfor <jm@localhost>; Thu, 29 Aug 2002 06:37:44 -0400 (EDT)\nReceived: from phobos [127.0.0.1]\n\tby localhost with IMAP (fetchmail-5.9.0)\n\tfor jm@localhost (single-drop); Thu, 29 Aug 2002 11:37:44 +0100 (IST)\nReceived: from egwn.net (ns2.egwn.net [193.172.5.4]) by\n    dogma.slashnull.org (8.11.6/8.11.6) with ESMTP id g7TAV8Z08321 for\n    <jm-rpm@jmason.org>; Thu, 29 Aug 2002 11:31:08 +0100\nReceived: from auth02.nl.egwn.net (localhost [127.0.0.1]) by egwn.net\n    (8.11.6/8.11.6/EGWN) with ESMTP id g7TAS2J09618; Thu, 29 Aug 2002 12:28:02\n    +0200\nReceived: from python (gw01.es3.egwn.net [212.9.66.13]) (authenticated) by\n    egwn.net (8.11.6/8.11.6/EGWN) with ESMTP id g7TARYJ09551 for\n    <rpm-list@freshrpms.net>; Thu, 29 Aug 2002 12:27:35 +0200\nFrom: Matthias Saou <matthias@egwn.net>\nTo: rpm-zzzlist@freshrpms.net\nSubject: Re: ALSA (almost) made easy\nMessage-Id: <20020829120926.0e6f691e.matthias@egwn.net>\nIn-Reply-To: <3D6DED60.7070107@myrealbox.com>\nReferences: <20020828004215.4bca2588.matthias@rpmforge.net>\n    <1030507320.3214.39.camel@herald.dragonsdawn.net>\n    <20020828100430.378c3856.matthias@rpmforge.net>\n    <1030546780.3214.54.camel@herald.dragonsdawn.net>\n    <20020828112645.B13047@ti19>\n    <1030551945.10627.4.camel@wanderlust.prognet.com>\n    <20020828190006.2200a154.matthias@rpmforge.net>\n    <1030567737.10901.9.camel@bobcat.ods.org>\n    <1030568564.10902.22.camel@bobcat.ods.org>\n    <20020829000606.5906404a.matthias@egwn.net>\n    <1030574318.1651.30.camel@bobcat.ods.org>\n    <20020829005025.160073af.matthias@egwn.net>\n    <3D6DED60.7070107@myrealbox.com>\nOrganization: Electronic Group Interactive\nX-Mailer: Sylpheed version 0.8.1claws (GTK+ 1.2.10; i386-redhat-linux)\nReply-BY: Tue, 24 Jul 2000 19:02:00 +1000\nX-Operating-System: GNU/Linux power!\nX-Message-Flag: Try using a real operating system : GNU/Linux power!\nMIME-Version: 1.0\nContent-Type: text/plain; charset=US-ASCII\nContent-Transfer-Encoding: 7bit\nX-Mailscanner: Found to be clean, Found to be clean\nSender: rpm-zzzlist-admin@freshrpms.net\nErrors-To: rpm-zzzlist-admin@freshrpms.net\nX-Beenthere: rpm-zzzlist@freshrpms.net\nX-Mailman-Version: 2.0.11\nPrecedence: bulk\nReply-To: rpm-zzzlist@freshrpms.net\nList-Help: <mailto:rpm-zzzlist-request@freshrpms.net?subject=help>\nList-Post: <mailto:rpm-zzzlist@freshrpms.net>\nList-Subscribe: <http://lists.freshrpms.net/mailman/listinfo/rpm-zzzlist>,\n    <mailto:rpm-list-request@freshrpms.net?subject=subscribe>\nList-Id: Freshrpms RPM discussion list <rpm-zzzlist.freshrpms.net>\nList-Unsubscribe: <http://lists.freshrpms.net/mailman/listinfo/rpm-zzzlist>,\n    <mailto:rpm-list-request@freshrpms.net?subject=unsubscribe>\nList-Archive: <http://lists.freshrpms.net/pipermail/rpm-zzzlist/>\nX-Original-Date: Thu, 29 Aug 2002 12:09:26 +0200\nDate: Thu, 29 Aug 2002 12:09:26 +0200\n\nOnce upon a time, Daniel wrote :\n\n>  > And yes, I accept patches/comments/suggestions about all those spec\n>  > files!\n> \n> Sure thing :)\n\nCool :-)\n\n> I've added to the spec some flags to remove OSS and ISA-PNP support at\n> build time if one wishes to, so is's possible to do a\n> \n> \trpmbuild --recompile <rpm> --without oss --without isapnp\n\nOK, I'll add this.\n\n> Also, having the kernel compiled by me, I have no kernel-source package\n> installed.  I've added a flag \"kernsrc\", that also can be used\n> --without, to remove the dependency for kernel-source at build time.  It\n> would be nice to check the correct kernel include files actually exist\n> (/lib/modules/`uname -r`/build/include/linux/*.h), though; however, I'm\n> a beginner in RPM building -- is it possible to BuildRequire for a file\n> not provided by a package at all?  I've googled a bit, and found no way\n> to do that.\n\nRequiring a file that isn't part of an rpm is not possible, no, except\nmaybe by stopping the build process if it isn't found... but that's errr...\nugly!\nAnd I really think that for people who installed a kernel from sources, the\neasiest is to install the alsa kernel drivers from source too...\n\n> I was also considering adding some sort of flag for the --with-cards\n> option in alsa's ./configure, but don't know how to do that.  Only found\n> out about --without from your first alsa-driver.spec, and existing RPM\n> docs don't help much.\n\nThis would be a tricky one since to use the \"--with <name>\" feature of\nrpmbuild, I think you'd need to add individual handling of each and every\ncard :-/\n\n> Oh, and one more thing :).  At first I've installed the first version of\n> alsa-driver for 2.4.18-10, although I don't have that kernel, to supply\n> the dependency for the rest of the alsa rpm's, and compiled the modules\n> from source.  It created the /dev files and all.\n\nThat's what the \"alsa-driver\" is there for, create all the base files\nexcluding the kernel drivers. What I would suggest for dependency reasons\nit to install an \"alsa-kernel\" for the original kernel (you've kept it,\nright? ;-)) and install ALSA modules from source for custom kernels built\nfrom source.\n\n> Then wanted to make my own rpm for 2.4.19, so now I'm trying to rpmbuild\n> the alsa-kernel package.  Removed all alsa rpms, and tried my spec:\n> \n> rpmbuild --ba alsa-driver.spec.mine --without oss --without isapnp\n> --without kernsrc\n> \n> But I get this:\n> \n> ==[long successful compile snipped]=====================================\n> RPM build errors:\n>       File listed twice: /dev/adsp\n>       File listed twice: /dev/amidi\n>       Installed (but unpackaged) file(s) found:\n>      /etc/makedev.d/00macros\n>      /etc/rc.d/init.d/alsasound\n> ========================================================================\n> \n> Oh, and I think I've forgot to mention, I'm running beta-null :).\n\nIndeed : The rpm 4.1 snapshot in (null) has a few new features among which\nhaving the build fail when files are present in the build root but not\nlisted in the %files section. I should remove them manually as part of the\nbuild process... or maybe the new \"%exclude /path/to/file\" in the %files\nsection would do, but I don't know how older versions of rpm would handle\nit. On my (null) build system, I've simply set the variable :\n%_unpackaged_files_terminate_build 0\n\nMatthias\n\n-- \nMatthias Saou                                World Trade Center\n-------------                                Edificio Norte 4 Planta\nSystem and Network Engineer                  08039 Barcelona, Spain\nElectronic Group Interactive                 Phone : +34 936 00 23 23\n\n_______________________________________________\nRPM-List mailing list <RPM-List@freshrpms.net>\nhttp://lists.freshrpms.net/mailman/listinfo/rpm-list\n\n"}